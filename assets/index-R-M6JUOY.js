const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CLvNyBbt.js","assets/index-DclVhhmy.js","assets/index-QfA8j4AK.css","assets/CodeEditor-CFrTM9T6.js","assets/CodeEditor-Dykd0T8L.css","assets/useRoles-CdrX6ctX.js","assets/useFetchOld-jhWToNPA.js","assets/SidePanelFormButtons-Bnu1SwTK.js","assets/SidePanelFormButtons.module-tJTvEwdD.js","assets/SidePanelFormButtons-Cl1KfOFD.css","assets/formikErrors-BEclzidg.js","assets/usePageParams-SH8h85Vf.js","assets/index-COvg1c36.js","assets/MultiSelectField-TXS6ntsL.js","assets/MultiSelectField-GyNA33om.css","assets/useInstances-C8zJiNI2.js","assets/helpers-ytdWvgKO.js","assets/InstancesPageActions-OlDqsxX8.js","assets/index-DzPCcXFi.js","assets/TablePagination-CYCmz9Ae.js","assets/TablePaginationBase-KhYyVat7.js","assets/TablePaginationBase-CJl3HN1X.css","assets/StatusFilter-B-voT8N1.js","assets/TableFilter-Bqvzf4yv.js","assets/TableFilter-DXBG6q86.css","assets/TableFilterChips-DGnB8Azr.js","assets/TableFilterChips-CHqetGbX.css","assets/NoData-CNaQCMLs.js","assets/index-geI-abAU.css","assets/InstancesPageActions-CswnIe9I.css"])))=>i.map(i=>d[i]);
import{j as l,g as b,h as Ee,k as K,l as Ie,i as Fe,G as J,p as Re,q as je,f as ue,s as He,r as $,b as Ye,e as ze,c as V,d as Se,n as Z,_ as ie,E as We}from"./index-DclVhhmy.js";import{C as Je}from"./CodeEditor-CFrTM9T6.js";import{S as Xe}from"./SidePanelFormButtons-Bnu1SwTK.js";import{u as Ze}from"./useFetchOld-jhWToNPA.js";import{u as et}from"./useRoles-CdrX6ctX.js";import{h as tt}from"./usePageParams-SH8h85Vf.js";try{let c=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},h=new c.Error().stack;h&&(c._sentryDebugIds=c._sentryDebugIds||{},c._sentryDebugIds[h]="28aa8c68-3715-4e8e-b0bf-cc5218080dbc",c._sentryDebugIdIdentifier="sentry-dbid-28aa8c68-3715-4e8e-b0bf-cc5218080dbc")}catch{}var ae={},X={},_e;function rt(){if(_e)return X;_e=1,X.byteLength=o,X.toByteArray=j,X.fromByteArray=g;for(var c=[],h=[],d=typeof Uint8Array<"u"?Uint8Array:Array,I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=0,S=I.length;w<S;++w)c[w]=I[w],h[I.charCodeAt(w)]=w;h[45]=62,h[95]=63;function f(p){var x=p.length;if(x%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=p.indexOf("=");u===-1&&(u=x);var y=u===x?0:4-u%4;return[u,y]}function o(p){var x=f(p),u=x[0],y=x[1];return(u+y)*3/4-y}function C(p,x,u){return(x+u)*3/4-u}function j(p){var x,u=f(p),y=u[0],E=u[1],N=new d(C(p,y,E)),L=0,O=E>0?y-4:y,m;for(m=0;m<O;m+=4)x=h[p.charCodeAt(m)]<<18|h[p.charCodeAt(m+1)]<<12|h[p.charCodeAt(m+2)]<<6|h[p.charCodeAt(m+3)],N[L++]=x>>16&255,N[L++]=x>>8&255,N[L++]=x&255;return E===2&&(x=h[p.charCodeAt(m)]<<2|h[p.charCodeAt(m+1)]>>4,N[L++]=x&255),E===1&&(x=h[p.charCodeAt(m)]<<10|h[p.charCodeAt(m+1)]<<4|h[p.charCodeAt(m+2)]>>2,N[L++]=x>>8&255,N[L++]=x&255),N}function F(p){return c[p>>18&63]+c[p>>12&63]+c[p>>6&63]+c[p&63]}function _(p,x,u){for(var y,E=[],N=x;N<u;N+=3)y=(p[N]<<16&16711680)+(p[N+1]<<8&65280)+(p[N+2]&255),E.push(F(y));return E.join("")}function g(p){for(var x,u=p.length,y=u%3,E=[],N=16383,L=0,O=u-y;L<O;L+=N)E.push(_(p,L,L+N>O?O:L+N));return y===1?(x=p[u-1],E.push(c[x>>2]+c[x<<4&63]+"==")):y===2&&(x=(p[u-2]<<8)+p[u-1],E.push(c[x>>10]+c[x>>4&63]+c[x<<2&63]+"=")),E.join("")}return X}var te={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Ae;function it(){return Ae||(Ae=1,te.read=function(c,h,d,I,w){var S,f,o=w*8-I-1,C=(1<<o)-1,j=C>>1,F=-7,_=d?w-1:0,g=d?-1:1,p=c[h+_];for(_+=g,S=p&(1<<-F)-1,p>>=-F,F+=o;F>0;S=S*256+c[h+_],_+=g,F-=8);for(f=S&(1<<-F)-1,S>>=-F,F+=I;F>0;f=f*256+c[h+_],_+=g,F-=8);if(S===0)S=1-j;else{if(S===C)return f?NaN:(p?-1:1)*(1/0);f=f+Math.pow(2,I),S=S-j}return(p?-1:1)*f*Math.pow(2,S-I)},te.write=function(c,h,d,I,w,S){var f,o,C,j=S*8-w-1,F=(1<<j)-1,_=F>>1,g=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=I?0:S-1,x=I?1:-1,u=h<0||h===0&&1/h<0?1:0;for(h=Math.abs(h),isNaN(h)||h===1/0?(o=isNaN(h)?1:0,f=F):(f=Math.floor(Math.log(h)/Math.LN2),h*(C=Math.pow(2,-f))<1&&(f--,C*=2),f+_>=1?h+=g/C:h+=g*Math.pow(2,1-_),h*C>=2&&(f++,C/=2),f+_>=F?(o=0,f=F):f+_>=1?(o=(h*C-1)*Math.pow(2,w),f=f+_):(o=h*Math.pow(2,_-1)*Math.pow(2,w),f=0));w>=8;c[d+p]=o&255,p+=x,o/=256,w-=8);for(f=f<<w|o,j+=w;j>0;c[d+p]=f&255,p+=x,f/=256,j-=8);c[d+p-x]|=u*128}),te}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var be;function nt(){return be||(be=1,function(c){const h=rt(),d=it(),I=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;c.Buffer=o,c.SlowBuffer=N,c.INSPECT_MAX_BYTES=50;const w=2147483647;c.kMaxLength=w,o.TYPED_ARRAY_SUPPORT=S(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function S(){try{const r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function f(r){if(r>w)throw new RangeError('The value "'+r+'" is invalid for option "size"');const e=new Uint8Array(r);return Object.setPrototypeOf(e,o.prototype),e}function o(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(r)}return C(r,e,t)}o.poolSize=8192;function C(r,e,t){if(typeof r=="string")return g(r,e);if(ArrayBuffer.isView(r))return x(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(q(r,ArrayBuffer)||r&&q(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(q(r,SharedArrayBuffer)||r&&q(r.buffer,SharedArrayBuffer)))return u(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const i=r.valueOf&&r.valueOf();if(i!=null&&i!==r)return o.from(i,e,t);const n=y(r);if(n)return n;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return o.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}o.from=function(r,e,t){return C(r,e,t)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function j(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function F(r,e,t){return j(r),r<=0?f(r):e!==void 0?typeof t=="string"?f(r).fill(e,t):f(r).fill(e):f(r)}o.alloc=function(r,e,t){return F(r,e,t)};function _(r){return j(r),f(r<0?0:E(r)|0)}o.allocUnsafe=function(r){return _(r)},o.allocUnsafeSlow=function(r){return _(r)};function g(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!o.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const t=L(r,e)|0;let i=f(t);const n=i.write(r,e);return n!==t&&(i=i.slice(0,n)),i}function p(r){const e=r.length<0?0:E(r.length)|0,t=f(e);for(let i=0;i<e;i+=1)t[i]=r[i]&255;return t}function x(r){if(q(r,Uint8Array)){const e=new Uint8Array(r);return u(e.buffer,e.byteOffset,e.byteLength)}return p(r)}function u(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let i;return e===void 0&&t===void 0?i=new Uint8Array(r):t===void 0?i=new Uint8Array(r,e):i=new Uint8Array(r,e,t),Object.setPrototypeOf(i,o.prototype),i}function y(r){if(o.isBuffer(r)){const e=E(r.length)|0,t=f(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||ce(r.length)?f(0):p(r);if(r.type==="Buffer"&&Array.isArray(r.data))return p(r.data)}function E(r){if(r>=w)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+w.toString(16)+" bytes");return r|0}function N(r){return+r!=r&&(r=0),o.alloc(+r)}o.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==o.prototype},o.compare=function(e,t){if(q(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),q(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let i=e.length,n=t.length;for(let s=0,a=Math.min(i,n);s<a;++s)if(e[s]!==t[s]){i=e[s],n=t[s];break}return i<n?-1:n<i?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return o.alloc(0);let i;if(t===void 0)for(t=0,i=0;i<e.length;++i)t+=e[i].length;const n=o.allocUnsafe(t);let s=0;for(i=0;i<e.length;++i){let a=e[i];if(q(a,Uint8Array))s+a.length>n.length?(o.isBuffer(a)||(a=o.from(a)),a.copy(n,s)):Uint8Array.prototype.set.call(n,a,s);else if(o.isBuffer(a))a.copy(n,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=a.length}return n};function L(r,e){if(o.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||q(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);const t=r.length,i=arguments.length>2&&arguments[2]===!0;if(!i&&t===0)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return se(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return Be(r).length;default:if(n)return i?-1:se(r).length;e=(""+e).toLowerCase(),n=!0}}o.byteLength=L;function O(r,e,t){let i=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return $e(this,e,t);case"utf8":case"utf-8":return he(this,e,t);case"ascii":return Me(this,e,t);case"latin1":case"binary":return Pe(this,e,t);case"base64":return Le(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return qe(this,e,t);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),i=!0}}o.prototype._isBuffer=!0;function m(r,e,t){const i=r[e];r[e]=r[t],r[t]=i}o.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)m(this,t,t+1);return this},o.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},o.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},o.prototype.toString=function(){const e=this.length;return e===0?"":arguments.length===0?he(this,0,e):O.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:o.compare(this,e)===0},o.prototype.inspect=function(){let e="";const t=c.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},I&&(o.prototype[I]=o.prototype.inspect),o.prototype.compare=function(e,t,i,n,s){if(q(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),i===void 0&&(i=e?e.length:0),n===void 0&&(n=0),s===void 0&&(s=this.length),t<0||i>e.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&t>=i)return 0;if(n>=s)return-1;if(t>=i)return 1;if(t>>>=0,i>>>=0,n>>>=0,s>>>=0,this===e)return 0;let a=s-n,B=i-t;const T=Math.min(a,B),U=this.slice(n,s),R=e.slice(t,i);for(let A=0;A<T;++A)if(U[A]!==R[A]){a=U[A],B=R[A];break}return a<B?-1:B<a?1:0};function P(r,e,t,i,n){if(r.length===0)return-1;if(typeof t=="string"?(i=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,ce(t)&&(t=n?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(n)return-1;t=r.length-1}else if(t<0)if(n)t=0;else return-1;if(typeof e=="string"&&(e=o.from(e,i)),o.isBuffer(e))return e.length===0?-1:v(r,e,t,i,n);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):v(r,[e],t,i,n);throw new TypeError("val must be string, number or Buffer")}function v(r,e,t,i,n){let s=1,a=r.length,B=e.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(r.length<2||e.length<2)return-1;s=2,a/=2,B/=2,t/=2}function T(R,A){return s===1?R[A]:R.readUInt16BE(A*s)}let U;if(n){let R=-1;for(U=t;U<a;U++)if(T(r,U)===T(e,R===-1?0:U-R)){if(R===-1&&(R=U),U-R+1===B)return R*s}else R!==-1&&(U-=U-R),R=-1}else for(t+B>a&&(t=a-B),U=t;U>=0;U--){let R=!0;for(let A=0;A<B;A++)if(T(r,U+A)!==T(e,A)){R=!1;break}if(R)return U}return-1}o.prototype.includes=function(e,t,i){return this.indexOf(e,t,i)!==-1},o.prototype.indexOf=function(e,t,i){return P(this,e,t,i,!0)},o.prototype.lastIndexOf=function(e,t,i){return P(this,e,t,i,!1)};function H(r,e,t,i){t=Number(t)||0;const n=r.length-t;i?(i=Number(i),i>n&&(i=n)):i=n;const s=e.length;i>s/2&&(i=s/2);let a;for(a=0;a<i;++a){const B=parseInt(e.substr(a*2,2),16);if(ce(B))return a;r[t+a]=B}return a}function Y(r,e,t,i){return ee(se(e,r.length-t),r,t,i)}function z(r,e,t,i){return ee(Ve(e),r,t,i)}function ne(r,e,t,i){return ee(Be(e),r,t,i)}function Ne(r,e,t,i){return ee(Ge(e,r.length-t),r,t,i)}o.prototype.write=function(e,t,i,n){if(t===void 0)n="utf8",i=this.length,t=0;else if(i===void 0&&typeof t=="string")n=t,i=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(i)?(i=i>>>0,n===void 0&&(n="utf8")):(n=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const s=this.length-t;if((i===void 0||i>s)&&(i=s),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let a=!1;for(;;)switch(n){case"hex":return H(this,e,t,i);case"utf8":case"utf-8":return Y(this,e,t,i);case"ascii":case"latin1":case"binary":return z(this,e,t,i);case"base64":return ne(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ne(this,e,t,i);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Le(r,e,t){return e===0&&t===r.length?h.fromByteArray(r):h.fromByteArray(r.slice(e,t))}function he(r,e,t){t=Math.min(r.length,t);const i=[];let n=e;for(;n<t;){const s=r[n];let a=null,B=s>239?4:s>223?3:s>191?2:1;if(n+B<=t){let T,U,R,A;switch(B){case 1:s<128&&(a=s);break;case 2:T=r[n+1],(T&192)===128&&(A=(s&31)<<6|T&63,A>127&&(a=A));break;case 3:T=r[n+1],U=r[n+2],(T&192)===128&&(U&192)===128&&(A=(s&15)<<12|(T&63)<<6|U&63,A>2047&&(A<55296||A>57343)&&(a=A));break;case 4:T=r[n+1],U=r[n+2],R=r[n+3],(T&192)===128&&(U&192)===128&&(R&192)===128&&(A=(s&15)<<18|(T&63)<<12|(U&63)<<6|R&63,A>65535&&A<1114112&&(a=A))}}a===null?(a=65533,B=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|a&1023),i.push(a),n+=B}return De(i)}const pe=4096;function De(r){const e=r.length;if(e<=pe)return String.fromCharCode.apply(String,r);let t="",i=0;for(;i<e;)t+=String.fromCharCode.apply(String,r.slice(i,i+=pe));return t}function Me(r,e,t){let i="";t=Math.min(r.length,t);for(let n=e;n<t;++n)i+=String.fromCharCode(r[n]&127);return i}function Pe(r,e,t){let i="";t=Math.min(r.length,t);for(let n=e;n<t;++n)i+=String.fromCharCode(r[n]);return i}function $e(r,e,t){const i=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>i)&&(t=i);let n="";for(let s=e;s<t;++s)n+=Qe[r[s]];return n}function qe(r,e,t){const i=r.slice(e,t);let n="";for(let s=0;s<i.length-1;s+=2)n+=String.fromCharCode(i[s]+i[s+1]*256);return n}o.prototype.slice=function(e,t){const i=this.length;e=~~e,t=t===void 0?i:~~t,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,o.prototype),n};function D(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(e,t,i){e=e>>>0,t=t>>>0,i||D(e,t,this.length);let n=this[e],s=1,a=0;for(;++a<t&&(s*=256);)n+=this[e+a]*s;return n},o.prototype.readUintBE=o.prototype.readUIntBE=function(e,t,i){e=e>>>0,t=t>>>0,i||D(e,t,this.length);let n=this[e+--t],s=1;for(;t>0&&(s*=256);)n+=this[e+--t]*s;return n},o.prototype.readUint8=o.prototype.readUInt8=function(e,t){return e=e>>>0,t||D(e,1,this.length),this[e]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||D(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||D(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||D(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readBigUInt64LE=k(function(e){e=e>>>0,Q(e,"offset");const t=this[e],i=this[e+7];(t===void 0||i===void 0)&&W(e,this.length-8);const n=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,s=this[++e]+this[++e]*2**8+this[++e]*2**16+i*2**24;return BigInt(n)+(BigInt(s)<<BigInt(32))}),o.prototype.readBigUInt64BE=k(function(e){e=e>>>0,Q(e,"offset");const t=this[e],i=this[e+7];(t===void 0||i===void 0)&&W(e,this.length-8);const n=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i;return(BigInt(n)<<BigInt(32))+BigInt(s)}),o.prototype.readIntLE=function(e,t,i){e=e>>>0,t=t>>>0,i||D(e,t,this.length);let n=this[e],s=1,a=0;for(;++a<t&&(s*=256);)n+=this[e+a]*s;return s*=128,n>=s&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,i){e=e>>>0,t=t>>>0,i||D(e,t,this.length);let n=t,s=1,a=this[e+--n];for(;n>0&&(s*=256);)a+=this[e+--n]*s;return s*=128,a>=s&&(a-=Math.pow(2,8*t)),a},o.prototype.readInt8=function(e,t){return e=e>>>0,t||D(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},o.prototype.readInt16LE=function(e,t){e=e>>>0,t||D(e,2,this.length);const i=this[e]|this[e+1]<<8;return i&32768?i|4294901760:i},o.prototype.readInt16BE=function(e,t){e=e>>>0,t||D(e,2,this.length);const i=this[e+1]|this[e]<<8;return i&32768?i|4294901760:i},o.prototype.readInt32LE=function(e,t){return e=e>>>0,t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e=e>>>0,t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readBigInt64LE=k(function(e){e=e>>>0,Q(e,"offset");const t=this[e],i=this[e+7];(t===void 0||i===void 0)&&W(e,this.length-8);const n=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(i<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)}),o.prototype.readBigInt64BE=k(function(e){e=e>>>0,Q(e,"offset");const t=this[e],i=this[e+7];(t===void 0||i===void 0)&&W(e,this.length-8);const n=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i)}),o.prototype.readFloatLE=function(e,t){return e=e>>>0,t||D(e,4,this.length),d.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e=e>>>0,t||D(e,4,this.length),d.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||D(e,8,this.length),d.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||D(e,8,this.length),d.read(this,e,!1,52,8)};function M(r,e,t,i,n,s){if(!o.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(t+i>r.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(e,t,i,n){if(e=+e,t=t>>>0,i=i>>>0,!n){const B=Math.pow(2,8*i)-1;M(this,e,t,i,B,0)}let s=1,a=0;for(this[t]=e&255;++a<i&&(s*=256);)this[t+a]=e/s&255;return t+i},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(e,t,i,n){if(e=+e,t=t>>>0,i=i>>>0,!n){const B=Math.pow(2,8*i)-1;M(this,e,t,i,B,0)}let s=i-1,a=1;for(this[t+s]=e&255;--s>=0&&(a*=256);)this[t+s]=e/a&255;return t+i},o.prototype.writeUint8=o.prototype.writeUInt8=function(e,t,i){return e=+e,t=t>>>0,i||M(this,e,t,1,255,0),this[t]=e&255,t+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(e,t,i){return e=+e,t=t>>>0,i||M(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(e,t,i){return e=+e,t=t>>>0,i||M(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(e,t,i){return e=+e,t=t>>>0,i||M(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(e,t,i){return e=+e,t=t>>>0,i||M(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function fe(r,e,t,i,n){we(e,i,n,r,t,7);let s=Number(e&BigInt(4294967295));r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s;let a=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=a,a=a>>8,r[t++]=a,a=a>>8,r[t++]=a,a=a>>8,r[t++]=a,t}function de(r,e,t,i,n){we(e,i,n,r,t,7);let s=Number(e&BigInt(4294967295));r[t+7]=s,s=s>>8,r[t+6]=s,s=s>>8,r[t+5]=s,s=s>>8,r[t+4]=s;let a=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=a,a=a>>8,r[t+2]=a,a=a>>8,r[t+1]=a,a=a>>8,r[t]=a,t+8}o.prototype.writeBigUInt64LE=k(function(e,t=0){return fe(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=k(function(e,t=0){return de(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(e,t,i,n){if(e=+e,t=t>>>0,!n){const T=Math.pow(2,8*i-1);M(this,e,t,i,T-1,-T)}let s=0,a=1,B=0;for(this[t]=e&255;++s<i&&(a*=256);)e<0&&B===0&&this[t+s-1]!==0&&(B=1),this[t+s]=(e/a>>0)-B&255;return t+i},o.prototype.writeIntBE=function(e,t,i,n){if(e=+e,t=t>>>0,!n){const T=Math.pow(2,8*i-1);M(this,e,t,i,T-1,-T)}let s=i-1,a=1,B=0;for(this[t+s]=e&255;--s>=0&&(a*=256);)e<0&&B===0&&this[t+s+1]!==0&&(B=1),this[t+s]=(e/a>>0)-B&255;return t+i},o.prototype.writeInt8=function(e,t,i){return e=+e,t=t>>>0,i||M(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1},o.prototype.writeInt16LE=function(e,t,i){return e=+e,t=t>>>0,i||M(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,i){return e=+e,t=t>>>0,i||M(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2},o.prototype.writeInt32LE=function(e,t,i){return e=+e,t=t>>>0,i||M(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,i){return e=+e,t=t>>>0,i||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4},o.prototype.writeBigInt64LE=k(function(e,t=0){return fe(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=k(function(e,t=0){return de(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ye(r,e,t,i,n,s){if(t+i>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function me(r,e,t,i,n){return e=+e,t=t>>>0,n||ye(r,e,t,4),d.write(r,e,t,i,23,4),t+4}o.prototype.writeFloatLE=function(e,t,i){return me(this,e,t,!0,i)},o.prototype.writeFloatBE=function(e,t,i){return me(this,e,t,!1,i)};function xe(r,e,t,i,n){return e=+e,t=t>>>0,n||ye(r,e,t,8),d.write(r,e,t,i,52,8),t+8}o.prototype.writeDoubleLE=function(e,t,i){return xe(this,e,t,!0,i)},o.prototype.writeDoubleBE=function(e,t,i){return xe(this,e,t,!1,i)},o.prototype.copy=function(e,t,i,n){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),!n&&n!==0&&(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<i&&(n=i),n===i||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-i&&(n=e.length-t+i);const s=n-i;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,i,n):Uint8Array.prototype.set.call(e,this.subarray(i,n),t),s},o.prototype.fill=function(e,t,i,n){if(typeof e=="string"){if(typeof t=="string"?(n=t,t=0,i=this.length):typeof i=="string"&&(n=i,i=this.length),n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(e.length===1){const a=e.charCodeAt(0);(n==="utf8"&&a<128||n==="latin1")&&(e=a)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;t=t>>>0,i=i===void 0?this.length:i>>>0,e||(e=0);let s;if(typeof e=="number")for(s=t;s<i;++s)this[s]=e;else{const a=o.isBuffer(e)?e:o.from(e,n),B=a.length;if(B===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<i-t;++s)this[s+t]=a[s%B]}return this};const G={};function oe(r,e,t){G[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(n){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:n,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}oe("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),oe("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError),oe("ERR_OUT_OF_RANGE",function(r,e,t){let i=`The value of "${r}" is out of range.`,n=t;return Number.isInteger(t)&&Math.abs(t)>2**32?n=ge(String(t)):typeof t=="bigint"&&(n=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(n=ge(n)),n+="n"),i+=` It must be ${e}. Received ${n}`,i},RangeError);function ge(r){let e="",t=r.length;const i=r[0]==="-"?1:0;for(;t>=i+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function Oe(r,e,t){Q(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&W(e,r.length-(t+1))}function we(r,e,t,i,n,s){if(r>t||r<e){const a=typeof e=="bigint"?"n":"";let B;throw e===0||e===BigInt(0)?B=`>= 0${a} and < 2${a} ** ${(s+1)*8}${a}`:B=`>= -(2${a} ** ${(s+1)*8-1}${a}) and < 2 ** ${(s+1)*8-1}${a}`,new G.ERR_OUT_OF_RANGE("value",B,r)}Oe(i,n,s)}function Q(r,e){if(typeof r!="number")throw new G.ERR_INVALID_ARG_TYPE(e,"number",r)}function W(r,e,t){throw Math.floor(r)!==r?(Q(r,t),new G.ERR_OUT_OF_RANGE("offset","an integer",r)):e<0?new G.ERR_BUFFER_OUT_OF_BOUNDS:new G.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${e}`,r)}const ve=/[^+/0-9A-Za-z-_]/g;function ke(r){if(r=r.split("=")[0],r=r.trim().replace(ve,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function se(r,e){e=e||1/0;let t;const i=r.length;let n=null;const s=[];for(let a=0;a<i;++a){if(t=r.charCodeAt(a),t>55295&&t<57344){if(!n){if(t>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(a+1===i){(e-=3)>-1&&s.push(239,191,189);continue}n=t;continue}if(t<56320){(e-=3)>-1&&s.push(239,191,189),n=t;continue}t=(n-55296<<10|t-56320)+65536}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,t<128){if((e-=1)<0)break;s.push(t)}else if(t<2048){if((e-=2)<0)break;s.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;s.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;s.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return s}function Ve(r){const e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function Ge(r,e){let t,i,n;const s=[];for(let a=0;a<r.length&&!((e-=2)<0);++a)t=r.charCodeAt(a),i=t>>8,n=t%256,s.push(n),s.push(i);return s}function Be(r){return h.toByteArray(ke(r))}function ee(r,e,t,i){let n;for(n=0;n<i&&!(n+t>=e.length||n>=r.length);++n)e[n+t]=r[n];return n}function q(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function ce(r){return r!==r}const Qe=function(){const r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){const i=t*16;for(let n=0;n<16;++n)e[i+n]=r[t]+r[n]}return e}();function k(r){return typeof BigInt>"u"?Ke:r}function Ke(){throw new Error("BigInt not supported")}}(ae)),ae}var Ce=nt();const ot=({formik:c})=>{var h,d,I,w,S,f,o,C,j,F,_,g,p,x,u;return l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"p-heading--5",children:"List of attachments"}),l.jsx("p",{className:"u-text--muted",children:"Attachments that will be sent along with the script. You can attach up to 5 files, for a maximum of 1.00MB. Filenames must be unique. On the client, the attachments will be placed in the directory whose name is accessible through the environment variable LANDSCAPE_ATTACHMENTS. They'll be deleted once the script has been run."}),l.jsx(b.Input,{label:"First attachment",labelClassName:"u-off-screen",type:"file",onChange:y=>{var E;return c.setFieldValue("attachments.first",((E=y.target.files)==null?void 0:E[0])??null)},error:(h=c.touched.attachments)!=null&&h.first&&((d=c.errors.attachments)!=null&&d.first)?(I=c.errors.attachments)==null?void 0:I.first:void 0}),l.jsx(b.Input,{label:"Second attachment",labelClassName:"u-off-screen",type:"file",onChange:y=>{var E;return c.setFieldValue("attachments.second",((E=y.target.files)==null?void 0:E[0])??null)},error:(w=c.touched.attachments)!=null&&w.second&&((S=c.errors.attachments)!=null&&S.second)?(f=c.errors.attachments)==null?void 0:f.second:void 0}),l.jsx(b.Input,{label:"Third attachment",labelClassName:"u-off-screen",type:"file",onChange:y=>{var E;return c.setFieldValue("attachments.third",((E=y.target.files)==null?void 0:E[0])??null)},error:(o=c.touched.attachments)!=null&&o.third&&((C=c.errors.attachments)!=null&&C.third)?(j=c.errors.attachments)==null?void 0:j.third:void 0}),l.jsx(b.Input,{label:"Fourth attachment",labelClassName:"u-off-screen",type:"file",onChange:y=>{var E;return c.setFieldValue("attachments.fourth",((E=y.target.files)==null?void 0:E[0])??null)},error:(F=c.touched.attachments)!=null&&F.fourth&&((_=c.errors.attachments)!=null&&_.fourth)?(g=c.errors.attachments)==null?void 0:g.fourth:void 0}),l.jsx(b.Input,{label:"Fifth attachment",labelClassName:"u-off-screen",type:"file",onChange:y=>{var E;return c.setFieldValue("attachments.fifth",((E=y.target.files)==null?void 0:E[0])??null)},error:(p=c.touched.attachments)!=null&&p.fifth&&((x=c.errors.attachments)!=null&&x.fifth)?(u=c.errors.attachments)==null?void 0:u.fifth:void 0})]})},st="_radioGroup_fv2b3_1",ct={radioGroup:st},at=({formik:c})=>{const h=async d=>{const I=d.currentTarget.value==="true";await c.setFieldValue("deliverImmediately",I),I||await c.setFieldValue("deliver_after",tt().toISOString().slice(0,16))};return l.jsxs(l.Fragment,{children:[l.jsx("span",{children:l.jsx("b",{children:"Delivery time"})}),l.jsxs("div",{className:ct.radioGroup,children:[l.jsx(b.Input,{type:"radio",label:"As soon as possible",name:"deliverImmediately",value:"true",onChange:h,checked:c.values.deliverImmediately}),l.jsx(b.Input,{type:"radio",label:"Scheduled",name:"deliverImmediately",value:"false",onChange:h,checked:!c.values.deliverImmediately})]}),!c.values.deliverImmediately&&l.jsx(b.Input,{label:"Deliver after",type:"datetime-local",labelClassName:"u-off-screen",...c.getFieldProps("deliver_after"),error:c.touched.deliver_after&&typeof c.errors.deliver_after=="string"?c.errors.deliver_after:void 0})]})},ut={access_group:"",attachments:{first:null,second:null,third:null,fourth:null,fifth:null},code:"",deliverImmediately:!0,deliver_after:"",saveScript:!0,script_id:0,time_limit:300,title:"",type:"new",username:""},lt=Ee().shape({access_group:K().when("type",{is:"new",then:c=>c.required()}),attachments:Ee().shape({first:J().nullable(),second:J().nullable(),third:J().nullable(),fourth:J().nullable(),fifth:J().nullable()}),code:K().when("type",{is:"new",then:c=>c.required()}),deliverImmediately:Fe().required(),deliver_after:K().when("deliverImmediately",{is:!1,then:c=>c.required()}),saveScript:Fe().when("type",{is:"new",then:c=>c.required()}),script_id:Ie().when("type",{is:"existing",then:c=>c.min(1,"Script is required")}),time_limit:Ie().when("type",{is:"new",then:c=>c.required()}),title:K().when("type",{is:"new",then:c=>c.required()}),type:K().required(),username:K().required()}),ht=[{label:"New script",value:"new"},{label:"Existing script",value:"existing"}],pt=(c,h)=>{var d;return{message:`"${c.type==="new"?c.title:(d=h.find(({value:I})=>I===c.script_id))==null?void 0:d.label}" script queued to execute successfully`,title:"Script execution queued"}},ft=c=>{const h=(c==null?void 0:c.map(({id:d,title:I})=>({label:I,value:d})))??[];return h.unshift({label:"Select script",value:0}),h},dt=({query:c})=>{const h=Re(),{notify:d}=je(),{closeSidePanel:I}=ue(),{getAccessGroupQuery:w}=et(),{createScriptAttachmentQuery:S,createScriptQuery:f,executeScriptQuery:o,getScriptsQuery:C,removeScriptQuery:j}=le(),{mutateAsync:F}=S,{mutateAsync:_}=f,{mutateAsync:g}=o,{mutateAsync:p}=j,u=He({initialValues:ut,validationSchema:lt,onSubmit:async m=>{try{if(m.type==="existing")await g({deliver_after:m.deliverImmediately?m.deliver_after:void 0,query:c,script_id:m.script_id,username:m.username});else{const{data:P}=await _({title:m.title,time_limit:m.time_limit,code:Ce.Buffer.from(m.code).toString("base64"),access_group:m.access_group,username:m.username}),v=Object.values(m.attachments).filter(Boolean);if(v.length>0){const H=await Promise.all(v.map(z=>z.arrayBuffer())),Y=v.map(({name:z},ne)=>F({script_id:P.id,file:`${z}$$${Ce.Buffer.from(H[ne]).toString("base64")}`}));await Promise.all(Y)}await g({deliver_after:m.deliverImmediately?m.deliver_after:void 0,query:c,script_id:P.id,username:m.username}),m.saveScript||await p({script_id:P.id})}I(),d.success(pt(m,E))}catch(P){h(P)}}}),{data:y}=C(),E=ft(y==null?void 0:y.data.results),N=async m=>{var v;const P=parseInt(m.target.value);if(await u.setFieldValue("script_id",P),!u.values.username){const H=((v=y==null?void 0:y.data.results.find(({id:Y})=>Y===P))==null?void 0:v.username)??"";await u.setFieldValue("username",H)}},{data:L}=w(),O=$.useMemo(()=>((L==null?void 0:L.data)??[]).map(({name:m,title:P})=>({label:P,value:m})),[L]);return l.jsxs(b.Form,{onSubmit:u.handleSubmit,noValidate:!0,children:[l.jsx(b.Select,{label:"Type",labelClassName:"u-off-screen",required:!0,options:ht,...u.getFieldProps("type"),error:u.touched.type&&u.errors.type?u.errors.type:void 0}),u.values.type==="existing"&&l.jsx(b.Select,{label:"Script",required:!0,options:E,...u.getFieldProps("script_id"),onChange:N,error:u.touched.script_id&&u.errors.script_id?u.errors.script_id:void 0}),u.values.type==="new"&&l.jsxs(l.Fragment,{children:[l.jsx(b.Input,{label:"Title",type:"text",required:!0,...u.getFieldProps("title"),error:u.touched.title&&u.errors.title?u.errors.title:void 0}),l.jsx(b.Input,{label:"Time limit",type:"number",required:!0,...u.getFieldProps("time_limit"),error:u.touched.time_limit&&u.errors.time_limit?u.errors.time_limit:void 0}),l.jsx(Je,{label:"Code",required:!0,onChange:m=>{u.setFieldValue("code",m??"")},value:u.values.code,error:u.touched.code&&u.errors.code?u.errors.code:void 0}),l.jsx(b.Select,{label:"Access group",required:!0,options:[{label:"Select access group",value:""},...O],...u.getFieldProps("access_group"),error:u.touched.access_group&&u.errors.access_group?u.errors.access_group:void 0})]}),l.jsx(b.Input,{label:"Run as user",type:"text",required:!0,...u.getFieldProps("username"),error:u.touched.username&&u.errors.username?u.errors.username:void 0}),u.values.type==="new"&&l.jsxs(l.Fragment,{children:[l.jsx(b.CheckboxInput,{label:"Save script",...u.getFieldProps("saveScript"),checked:u.values.saveScript}),l.jsx(ot,{formik:u})]}),l.jsx(at,{formik:u}),l.jsx(Xe,{submitButtonDisabled:u.isSubmitting,submitButtonText:"Run script"})]})},Ue={access_group:"",attachments:[],creator:{email:"",id:0,name:""},id:0,interpreter:"",time_limit:0,title:"loading",username:""},yt="_actions_16h1j_1",mt="_creator_16h1j_2",xt="_accessGroup_16h1j_3",gt="_hidden_16h1j_11",re={actions:yt,creator:mt,accessGroup:xt,hidden:gt},wt=({column:c,row:{original:h}})=>{const d={};return h.title==="loading"?c.id==="title"?d.colSpan=4:(d.className=re.hidden,d["aria-hidden"]=!0):c.id==="title"?d.role="rowheader":c.id==="access_group"?d["aria-label"]="Access group":c.id==="creator.name"?d["aria-label"]="Creator":c.id==="id"&&(d["aria-label"]="Actions"),d};function le(){const c=Ye(),h=Ze(),d=ze(),I=(g={},p={})=>Se({queryKey:["scripts",g],queryFn:()=>d.get("scripts",{params:g}),...p}),w=(g,p={})=>Se({queryKey:["scriptCode",g],queryFn:()=>h.get("GetScriptCode",{params:g}),...p}),S=V({mutationKey:["scripts","execute"],mutationFn:g=>h.get("ExecuteScript",{params:g})}),f=V({mutationKey:["scripts","remove"],mutationFn:g=>h.get("RemoveScript",{params:g}),onSuccess:()=>c.invalidateQueries({queryKey:["scripts"]})}),o=V({mutationKey:["scripts","create"],mutationFn:g=>h.get("CreateScript",{params:g}),onSuccess:()=>c.invalidateQueries({queryKey:["scripts"]})}),C=V({mutationKey:["scripts","edit"],mutationFn:g=>h.get("EditScript",{params:g}),onSuccess:()=>c.invalidateQueries({queryKey:["scripts"]})}),j=V({mutationKey:["scripts","copy"],mutationFn:g=>h.get("CopyScript",{params:g}),onSuccess:()=>c.invalidateQueries({queryKey:["scripts"]})}),F=V({mutationKey:["scripts","removeAttachment"],mutationFn:g=>h.get("RemoveScriptAttachment",{params:g}),onSuccess:()=>c.invalidateQueries({queryKey:["scripts"]})}),_=V({mutationKey:["scripts","createAttachment"],mutationFn:g=>h.get("CreateScriptAttachment",{params:g}),onSuccess:()=>c.invalidateQueries({queryKey:["scripts"]})});return{getScriptsQuery:I,getScriptCodeQuery:w,executeScriptQuery:S,removeScriptQuery:f,createScriptQuery:o,editScriptQuery:C,copyScriptQuery:j,removeScriptAttachmentQuery:F,createScriptAttachmentQuery:_}}const Bt="_toggleButton_bnzrt_1",Et="_menu_bnzrt_6",Te={toggleButton:Bt,menu:Et},It=$.lazy(async()=>ie(()=>import("./index-CLvNyBbt.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),Ft=$.lazy(async()=>ie(()=>import("./index-COvg1c36.js"),__vite__mapDeps([12,1,2,11,13,14,7,8,9,15,6,16,17,18,19,20,21,22,23,24,25,26,27,28,29,3,4,5]))),St=({script:c})=>{const[h,d]=$.useState(!1),I=Re(),{notify:w}=je(),{setSidePanelContent:S}=ue(),{removeScriptQuery:f}=le(),{mutateAsync:o,isPending:C}=f,j=(u,y)=>{S(`Run "${y.title}" script`,l.jsx($.Suspense,{fallback:l.jsx(Z,{}),children:l.jsx(Ft,{script:y})}))},F=(u,y)=>{if(y.action==="add")return;u.currentTarget.blur();const E=y.action==="copy"?`Duplicate "${y.script.title}" script`:`Edit "${y.script.title}" script`;S(E,l.jsx($.Suspense,{fallback:l.jsx(Z,{}),children:l.jsx(It,{...y})}))},_=async()=>{try{await o({script_id:c.id}),w.success({message:`"${c.title}" script removed successfully`,title:"Script removed"})}catch(u){I(u)}},g=()=>{d(!0)},p=()=>{d(!1)},x=[{children:l.jsxs(l.Fragment,{children:[l.jsx(b.Icon,{name:"unit-running"}),l.jsx("span",{children:"Run script"})]}),"aria-label":`Run ${c.title} script`,hasIcon:!0,onClick:u=>{j(u,c)}},{children:l.jsxs(l.Fragment,{children:[l.jsx(b.Icon,{name:"canvas"}),l.jsx("span",{children:"Duplicate"})]}),"aria-label":`Copy ${c.title} script`,hasIcon:!0,onClick:u=>{F(u,{action:"copy",script:c})}},{children:l.jsxs(l.Fragment,{children:[l.jsx(b.Icon,{name:"edit"}),l.jsx("span",{children:"Edit"})]}),"aria-label":`Edit ${c.title} script`,hasIcon:!0,onClick:u=>{F(u,{action:"edit",script:c})}},{children:l.jsxs(l.Fragment,{children:[l.jsx(b.Icon,{name:b.ICONS.delete}),l.jsx("span",{children:"Remove"})]}),"aria-label":`Remove ${c.title} script`,hasIcon:!0,onClick:g}];return l.jsxs(l.Fragment,{children:[l.jsx(b.ContextualMenu,{position:"left",className:Te.menu,toggleClassName:Te.toggleButton,toggleAppearance:"base",toggleLabel:l.jsx(b.Icon,{name:"contextual-menu"}),toggleProps:{"aria-label":`${c.title} actions`},links:x}),h&&l.jsx(b.ConfirmationModal,{title:"Remove script",confirmButtonLabel:"Remove",confirmButtonAppearance:"negative",confirmButtonDisabled:C,confirmButtonLoading:C,onConfirm:_,close:p,children:l.jsxs("p",{children:['This will remove "',c.title,'" script.']})})]})},_t=({isScriptsLoading:c,scripts:h})=>{const d=$.useMemo(()=>c?[Ue]:h,[c,h]),I=$.useMemo(()=>[{Header:"Title",accessor:"title",Cell:({row:w})=>w.original.title===Ue.title?l.jsx(Z,{}):l.jsx("span",{children:w.original.title})},{Header:"Access group",accessor:"access_group",className:re.accessGroup},{Header:"Creator",accessor:"creator.name",className:re.creator},{Header:"Actions",accessor:"id",className:re.actions,Cell:({row:w})=>l.jsx(St,{script:w.original})}],[d]);return l.jsx(b.ModularTable,{columns:I,data:d,getCellProps:wt})},At=$.lazy(()=>ie(()=>import("./index-CLvNyBbt.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),bt=()=>{const{setSidePanelContent:c}=ue(),h=()=>{c("Add script",l.jsx($.Suspense,{fallback:l.jsx(Z,{}),children:l.jsx(At,{action:"add"})}))};return l.jsx(We,{title:"No scripts found",icon:"connected",body:l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"u-no-margin--bottom",children:"You havenâ€™t added any scripts yet."}),l.jsx("a",{href:"https://ubuntu.com/landscape/docs/managing-computers",target:"_blank",rel:"nofollow noopener noreferrer",children:"How to manage instances in Landscape"})]}),cta:[l.jsx(b.Button,{appearance:"positive",onClick:h,type:"button",children:"Add script"},"table-add-new-mirror")]})},Ct=$.lazy(()=>ie(()=>import("./index-CLvNyBbt.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),Ut=c=>l.jsx($.Suspense,{fallback:l.jsx(Z,{}),children:l.jsx(Ct,{...c})}),Pt=Object.freeze(Object.defineProperty({__proto__:null,RunInstanceScriptForm:dt,ScriptList:_t,ScriptsEmptyState:bt,SingleScript:Ut,useScripts:le},Symbol.toStringTag,{value:"Module"}));export{at as D,bt as S,_t as a,Ut as b,Ce as c,Pt as i,le as u};
